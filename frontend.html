<!DOCTYPE html>
<html>
<head>
    <script>
            // This function could be used to send a command to open or close a valve immediately.
            function changeValveStatus(valveId, action) {
                fetch('/api/change-valve-status', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ valveId: valveId, action: action }),
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    alert('Valve status changed: ' + data.success);
                })
                .catch((error) => {
                    console.error('Error:', error);
                    alert('Failed to change valve status');
                });
            }

            // This function sends the time set commands to the Flask backend.
            function setTime(valveId, action, time) {
                fetch('/api/set-time', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ deviceId: valveId, action: action, time: time }),
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Success:', data);
                    alert('Time set successfully for ' + valveId);
                })
                .catch((error) => {
                    console.error('Error:', error);
                    alert('Failed to set time for ' + valveId);
                });
            }
        </script>
    
    <title>Valve Control</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #4CAF50;
            margin-bottom: 40px;
        }
        .button {
            background-color: #4CAF50;
            border: none;
            border-radius: 4px;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .button:hover {
            background-color: #367c39;
        }
        .button-close {
            background-color: #f44336;
        }
        .button-close:hover {
            background-color: #d7382b;
        }
        .time-input {
            margin-top: 20px;
            text-align: left;
            display: inline-block;
        }
        .label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        input[type="time"] {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px;
            font-size: 16px;
            margin-right: 10px;
        }
        @media (max-width: 600px) {
            .time-input, .button {
                width: 100%;
                box-sizing: border-box;
            }
            input[type="time"] {
                width: calc(100% - 120px);
            }
        }
    </style>
</head>
<body>
    <h1>Valve Control Panel</h1>
    
    <!-- Valve Control Buttons -->
    <div>
        <button class="button" onclick="changeValveStatus('valve1', 'open')">Open Valve 1</button>
        <button class="button button-close" onclick="changeValveStatus('valve1', 'close')">Close Valve 1</button>
    </div>
    <div>
        <button class="button" onclick="changeValveStatus('valve2', 'open')">Open Valve 2</button>
        <button class="button button-close" onclick="changeValveStatus('valve2', 'close')">Close Valve 2</button>
    </div>
    <div>
        <button class="button" onclick="changeValveStatus('valve3', 'open')">Open Valve 3</button>
        <button class="button button-close" onclick="changeValveStatus('valve3', 'close')">Close Valve 3</button>
    </div>

    <!-- Schedule Settings for Each Valve -->
    <!-- Valve 1 -->
    <div class="time-input">
        <label class="label">Set Open Time for Valve 1 (HH:MM):</label>
        <input type="time" id="openTimeValve1">
        <button onclick="setTime('valve1', 'open', document.getElementById('openTimeValve1').value)">Set Open Time</button>
    </div>
    <div class="time-input">
        <label class="label">Set Close Time for Valve 1 (HH:MM):</label>
        <input type="time" id="closeTimeValve1">
        <button onclick="setTime('valve1', 'close', document.getElementById('closeTimeValve1').value)">Set Close Time</button>
    </div>

    <!-- Valve 2 -->
    <div class="time-input">
        <label class="label">Set Open Time for Valve 2 (HH:MM):</label>
        <input type="time" id="openTimeValve2">
        <button onclick="setTime('valve2', 'open', document.getElementById('openTimeValve2').value)">Set Open Time</button>
    </div>
    <div class="time-input">
        <label class="label">Set Close Time for Valve 2 (HH:MM):</label>
        <input type="time" id="closeTimeValve2">
        <button onclick="setTime('valve2', 'close', document.getElementById('closeTimeValve2').value)">Set Close Time</button>
    </div>

    <!-- Valve 3 -->
    <div class="time-input">
        <label class="label">Set Open Time for Valve 3 (HH:MM):</label>
        <input type="time" id="openTimeValve3">
        <button onclick="setTime('valve3', 'open', document.getElementById('openTimeValve3').value)">Set Open Time</button>
    </div>
    <div class="time-input">
        <label class="label">Set Close Time for Valve 3 (HH:MM):</label>
        <input type="time" id="closeTimeValve3">
        <button onclick="setTime('valve3', 'close', document.getElementById('closeTimeValve3').value)">Set Close Time</button>
    </div>

    <script>
        // existing changeValveStatus function...

        function setTime(valve, action, time) {
            // existing setTime function...
        }
    </script>
</body>
</html>

